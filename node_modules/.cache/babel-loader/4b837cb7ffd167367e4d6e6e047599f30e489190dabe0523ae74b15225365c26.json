{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, withCtx as _withCtx, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, Fragment as _Fragment } from \"vue\";\nconst _hoisted_1 = {\n  class: \"wrapper\"\n};\nconst _hoisted_2 = {\n  class: \"right-panel\"\n};\nconst _hoisted_3 = {\n  class: \"logo-container\"\n};\nconst _hoisted_4 = {\n  class: \"nav-buttons\"\n};\nconst _hoisted_5 = {\n  class: \"button-list\"\n};\nconst _hoisted_6 = {\n  key: 0\n};\nconst _hoisted_7 = {\n  key: 1\n};\nconst _hoisted_8 = {\n  key: 2\n};\nconst _hoisted_9 = {\n  key: 3\n};\nconst _hoisted_10 = {\n  key: 4,\n  class: \"welcome-message\"\n};\nconst _hoisted_11 = {\n  key: 5\n};\nconst _hoisted_12 = {\n  key: 6\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_router_view = _resolveComponent(\"router-view\");\n  const _component_TheWelcome = _resolveComponent(\"TheWelcome\");\n  const _component_router_link = _resolveComponent(\"router-link\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createElementVNode(\"header\", null, [_createElementVNode(\"div\", _hoisted_1, [_createVNode(_component_router_view)]), _cache[1] || (_cache[1] = _createElementVNode(\"link\", {\n    href: \"https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;700&display=swap\",\n    rel: \"stylesheet\"\n  }, null, -1 /* HOISTED */))]), _createElementVNode(\"main\", null, [_createVNode(_component_TheWelcome)]), _createElementVNode(\"aside\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_createVNode(_component_router_link, {\n    to: \"/\"\n  }, {\n    default: _withCtx(() => _cache[2] || (_cache[2] = [_createElementVNode(\"img\", {\n      src: \"/images/logo.png\",\n      alt: \"Logo\",\n      class: \"logo\"\n    }, null, -1 /* HOISTED */)])),\n    _: 1 /* STABLE */\n  })]), _createElementVNode(\"nav\", _hoisted_4, [_createElementVNode(\"ul\", _hoisted_5, [_createElementVNode(\"li\", null, [_createVNode(_component_router_link, {\n    to: \"/\",\n    class: \"button\"\n  }, {\n    default: _withCtx(() => _cache[3] || (_cache[3] = [_createTextVNode(\"Главная\")])),\n    _: 1 /* STABLE */\n  })]), _createElementVNode(\"li\", null, [_createVNode(_component_router_link, {\n    to: \"/about\",\n    class: \"button\"\n  }, {\n    default: _withCtx(() => _cache[4] || (_cache[4] = [_createTextVNode(\"О нас\")])),\n    _: 1 /* STABLE */\n  })]), _createElementVNode(\"li\", null, [_createVNode(_component_router_link, {\n    to: \"/contact\",\n    class: \"button\"\n  }, {\n    default: _withCtx(() => _cache[5] || (_cache[5] = [_createTextVNode(\"Контакты\")])),\n    _: 1 /* STABLE */\n  })]), $data.isAuthenticated ? (_openBlock(), _createElementBlock(\"li\", _hoisted_6, [_createVNode(_component_router_link, {\n    to: \"/repairs\",\n    class: \"button\"\n  }, {\n    default: _withCtx(() => _cache[6] || (_cache[6] = [_createTextVNode(\"Ремонты\")])),\n    _: 1 /* STABLE */\n  })])) : _createCommentVNode(\"v-if\", true), $data.isAuthenticated ? (_openBlock(), _createElementBlock(\"li\", _hoisted_7, [_createVNode(_component_router_link, {\n    to: \"/clients\",\n    class: \"button\"\n  }, {\n    default: _withCtx(() => _cache[7] || (_cache[7] = [_createTextVNode(\"Клиенты\")])),\n    _: 1 /* STABLE */\n  })])) : _createCommentVNode(\"v-if\", true), !$data.isAuthenticated ? (_openBlock(), _createElementBlock(\"li\", _hoisted_8, [_createVNode(_component_router_link, {\n    to: \"/login\",\n    class: \"button\"\n  }, {\n    default: _withCtx(() => _cache[8] || (_cache[8] = [_createTextVNode(\"Войти\")])),\n    _: 1 /* STABLE */\n  })])) : _createCommentVNode(\"v-if\", true), !$data.isAuthenticated ? (_openBlock(), _createElementBlock(\"li\", _hoisted_9, [_createVNode(_component_router_link, {\n    to: \"/register\",\n    class: \"button\"\n  }, {\n    default: _withCtx(() => _cache[9] || (_cache[9] = [_createTextVNode(\"Зарегистрироваться\")])),\n    _: 1 /* STABLE */\n  })])) : _createCommentVNode(\"v-if\", true), $data.isAuthenticated ? (_openBlock(), _createElementBlock(\"li\", _hoisted_10, [_createElementVNode(\"span\", null, \"Добро пожаловать, \" + _toDisplayString($data.username), 1 /* TEXT */)])) : _createCommentVNode(\"v-if\", true), $data.isAuthenticated ? (_openBlock(), _createElementBlock(\"li\", _hoisted_11, [_createElementVNode(\"button\", {\n    onClick: _cache[0] || (_cache[0] = (...args) => $options.logout && $options.logout(...args)),\n    class: \"button\"\n  }, \"Выйти\")])) : _createCommentVNode(\"v-if\", true), $data.isAuthenticated && $data.role === 'admin' ? (_openBlock(), _createElementBlock(\"li\", _hoisted_12, _cache[10] || (_cache[10] = [_createElementVNode(\"a\", {\n    href: \"http://localhost:3000\",\n    class: \"admin-button\"\n  }, \"Админ-панель\", -1 /* HOISTED */)]))) : _createCommentVNode(\"v-if\", true)])])])], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["class","key","_createElementBlock","_Fragment","_createElementVNode","_hoisted_1","_createVNode","_component_router_view","href","rel","_component_TheWelcome","_hoisted_2","_hoisted_3","_component_router_link","to","default","_withCtx","_cache","src","alt","_","_hoisted_4","_hoisted_5","_createTextVNode","$data","isAuthenticated","_hoisted_6","_createCommentVNode","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_toDisplayString","username","_hoisted_11","onClick","args","$options","logout","role","_hoisted_12"],"sources":["/home/vas/zuev/repairs/vue/src/App.vue"],"sourcesContent":["<template>\n  <header>\n    <div class=\"wrapper\">\n      <router-view></router-view>\n    </div>\n    <link href=\"https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;700&display=swap\" rel=\"stylesheet\">\n  </header>\n  <main>\n    <TheWelcome />\n  </main>\n  <aside class=\"right-panel\">\n    <div class=\"logo-container\">\n      <router-link to=\"/\">\n        <img src=\"/images/logo.png\" alt=\"Logo\" class=\"logo\" />\n      </router-link>\n    </div>\n    <nav class=\"nav-buttons\">\n      <ul class=\"button-list\">\n        <li><router-link to=\"/\" class=\"button\">Главная</router-link></li>\n        <li><router-link to=\"/about\" class=\"button\">О нас</router-link></li>\n        <li><router-link to=\"/contact\" class=\"button\">Контакты</router-link></li>\n        <li v-if=\"isAuthenticated\"><router-link to=\"/repairs\" class=\"button\">Ремонты</router-link></li>\n        <li v-if=\"isAuthenticated\"><router-link to=\"/clients\" class=\"button\">Клиенты</router-link></li>\n        <li v-if=\"!isAuthenticated\"><router-link to=\"/login\" class=\"button\">Войти</router-link></li>\n        <li v-if=\"!isAuthenticated\"><router-link to=\"/register\" class=\"button\">Зарегистрироваться</router-link></li>\n        <li v-if=\"isAuthenticated\" class=\"welcome-message\"><span>Добро пожаловать, {{ username }}</span></li>\n        <li v-if=\"isAuthenticated\"><button @click=\"logout\" class=\"button\">Выйти</button></li>\n        <li v-if=\"isAuthenticated && role === 'admin'\"><a href=\"http://localhost:3000\" class=\"admin-button\">Админ-панель</a></li>\n      </ul>\n    </nav>\n  </aside>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      isAuthenticated: false,\n      username: '',\n      role: ''\n    };\n  },\n  created() {\n    this.checkAuth();\n  },\n  methods: {\n    async checkAuth() {\n      try {\n        const response = await fetch('http://localhost:3000/auth/check', {\n          method: 'GET',\n          credentials: 'include',\n        });\n        const data = await response.json();\n\n        if (response.ok) {\n          this.isAuthenticated = true;\n          this.username = data.username || 'Пользователь';\n          this.role = data.role || '';\n        } else {\n          console.error('Токен недействителен:', data.message);\n          this.isAuthenticated = false;\n          this.username = '';\n          this.role = '';\n        }\n      } catch (err) {\n        console.error('Ошибка проверки авторизации:', err);\n        this.isAuthenticated = false;\n        this.username = '';\n        this.role = '';\n      }\n    },\n    async logout() {\n      try {\n        const response = await fetch('http://localhost:3000/auth/logout', {\n          method: 'GET',\n          credentials: 'include',\n        });\n\n        if (response.ok) {\n          this.isAuthenticated = false;\n          this.username = '';\n          this.role = '';\n          this.$router.push('/');\n        } else {\n          console.error('Сервер вернул ошибку при выходе');\n        }\n      } catch (err) {\n        console.error('Ошибка выхода:', err);\n        this.isAuthenticated = false;\n        this.username = '';\n        this.role = '';\n        this.$router.push('/');\n      }\n    }\n  }\n};\n</script>\n\n<style scoped>\n/* Боковая панель */\n.right-panel {\n  position: fixed;\n  top: 50%;\n  right: 0;\n  transform: translateY(-50%);\n  background: linear-gradient(135deg, rgba(60, 47, 47, 0.95), rgba(74, 112, 67, 0.95)); /* Бордово-зеленый градиент */\n  backdrop-filter: blur(10px);\n  border-left: 1px solid rgba(255, 255, 255, 0.2); /* Полупрозрачная белая граница */\n  padding: 20px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 15px;\n  border-radius: 10px;\n  box-shadow: 0 3px 8px rgba(0, 0, 0, 0.3);\n}\n\n/* Логотип */\n.logo-container {\n  display: flex;\n  justify-content: center;\n}\n\n.logo {\n  max-width: 100px;\n  height: auto;\n  border-radius: 5px;\n  transition: transform 0.3s ease;\n}\n\n.logo:hover {\n  transform: scale(1.05);\n}\n\n/* Список кнопок */\n.button-list {\n  list-style-type: none;\n  padding: 0;\n  margin: 0;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 10px;\n}\n\n/* Общие стили для кнопок навигации */\n.button {\n  display: block;\n  width: 180px;\n  padding: 10px 15px;\n  background: #722f37; /* Бордовый фон */\n  color: #f5f5f5; /* Светлый текст */\n  text-decoration: none;\n  border-radius: 8px;\n  font-weight: bold;\n  text-align: center;\n  transition: background 0.3s ease, transform 0.3s ease, box-shadow 0.3s ease;\n  box-shadow: 0 3px 8px rgba(0, 0, 0, 0.2);\n}\n\n.button:hover {\n  background: #355e3b; /* Зеленый при наведении */\n  transform: translateY(-2px);\n  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);\n}\n\n/* Кнопка админ-панели */\n.admin-button {\n  display: block;\n  width: auto;\n  padding: 10px 15px;\n  background: linear-gradient(135deg, #722f37, #355e3b); /* Градиент бордовый-зеленый */\n  color: #f5f5f5;\n  text-decoration: none;\n  border-radius: 8px;\n  font-weight: bold;\n  text-transform: uppercase;\n  text-align: center;\n  box-shadow: 0 3px 8px rgba(0, 0, 0, 0.2);\n  transition: background 0.3s ease, transform 0.3s ease, box-shadow 0.3s ease;\n}\n\n.admin-button:hover {\n  background: linear-gradient(135deg, #355e3b, #722f37); /* Обратный градиент при наведении */\n  transform: translateY(-2px);\n  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);\n}\n\n/* Приветственное сообщение */\n.welcome-message span {\n  display: block;\n  width: auto;\n  padding: 10px 15px;\n  font-size: 16px;\n  color: #f5f5f5; /* Светлый текст */\n  font-weight: bold;\n  text-align: center;\n  background: rgba(60, 47, 47, 0.5); /* Полупрозрачный бордовый фон */\n  border-radius: 8px;\n}\n\n/* Адаптивность */\n@media (max-width: 768px) {\n  .right-panel {\n    padding: 15px;\n    width: 160px;\n  }\n\n  .logo {\n    max-width: 80px;\n  }\n\n  .button {\n    width: 140px;\n    padding: 8px 10px;\n    font-size: 0.9rem;\n  }\n\n  .admin-button,\n  .welcome-message span {\n    padding: 8px 10px;\n    font-size: 0.9rem;\n  }\n}\n</style>"],"mappings":";;EAESA,KAAK,EAAC;AAAS;;EAQfA,KAAK,EAAC;AAAa;;EACnBA,KAAK,EAAC;AAAgB;;EAKtBA,KAAK,EAAC;AAAa;;EAClBA,KAAK,EAAC;AAAa;;EAjB7BC,GAAA;AAAA;;EAAAA,GAAA;AAAA;;EAAAA,GAAA;AAAA;;EAAAA,GAAA;AAAA;;EAAAA,GAAA;EAyBmCD,KAAK,EAAC;;;EAzBzCC,GAAA;AAAA;;EAAAA,GAAA;AAAA;;;;;uBAAAC,mBAAA,CAAAC,SAAA,SACEC,mBAAA,CAKS,iBAJPA,mBAAA,CAEM,OAFNC,UAEM,GADJC,YAAA,CAA2BC,sBAAA,E,6BAE7BH,mBAAA,CAA6G;IAAvGI,IAAI,EAAC,gFAAgF;IAACC,GAAG,EAAC;iCAElGL,mBAAA,CAEO,eADLE,YAAA,CAAcI,qBAAA,E,GAEhBN,mBAAA,CAoBQ,SApBRO,UAoBQ,GAnBNP,mBAAA,CAIM,OAJNQ,UAIM,GAHJN,YAAA,CAEcO,sBAAA;IAFDC,EAAE,EAAC;EAAG;IAZzBC,OAAA,EAAAC,QAAA,CAaQ,MAAsDC,MAAA,QAAAA,MAAA,OAAtDb,mBAAA,CAAsD;MAAjDc,GAAG,EAAC,kBAAkB;MAACC,GAAG,EAAC,MAAM;MAACnB,KAAK,EAAC;;IAbrDoB,CAAA;QAgBIhB,mBAAA,CAaM,OAbNiB,UAaM,GAZJjB,mBAAA,CAWK,MAXLkB,UAWK,GAVHlB,mBAAA,CAAiE,aAA7DE,YAAA,CAAwDO,sBAAA;IAA3CC,EAAE,EAAC,GAAG;IAACd,KAAK,EAAC;;IAlBtCe,OAAA,EAAAC,QAAA,CAkB+C,MAAOC,MAAA,QAAAA,MAAA,OAlBtDM,gBAAA,CAkB+C,SAAO,E;IAlBtDH,CAAA;QAmBQhB,mBAAA,CAAoE,aAAhEE,YAAA,CAA2DO,sBAAA;IAA9CC,EAAE,EAAC,QAAQ;IAACd,KAAK,EAAC;;IAnB3Ce,OAAA,EAAAC,QAAA,CAmBoD,MAAKC,MAAA,QAAAA,MAAA,OAnBzDM,gBAAA,CAmBoD,OAAK,E;IAnBzDH,CAAA;QAoBQhB,mBAAA,CAAyE,aAArEE,YAAA,CAAgEO,sBAAA;IAAnDC,EAAE,EAAC,UAAU;IAACd,KAAK,EAAC;;IApB7Ce,OAAA,EAAAC,QAAA,CAoBsD,MAAQC,MAAA,QAAAA,MAAA,OApB9DM,gBAAA,CAoBsD,UAAQ,E;IApB9DH,CAAA;QAqBkBI,KAAA,CAAAC,eAAe,I,cAAzBvB,mBAAA,CAA+F,MArBvGwB,UAAA,GAqBmCpB,YAAA,CAA+DO,sBAAA;IAAlDC,EAAE,EAAC,UAAU;IAACd,KAAK,EAAC;;IArBpEe,OAAA,EAAAC,QAAA,CAqB6E,MAAOC,MAAA,QAAAA,MAAA,OArBpFM,gBAAA,CAqB6E,SAAO,E;IArBpFH,CAAA;UAAAO,mBAAA,gBAsBkBH,KAAA,CAAAC,eAAe,I,cAAzBvB,mBAAA,CAA+F,MAtBvG0B,UAAA,GAsBmCtB,YAAA,CAA+DO,sBAAA;IAAlDC,EAAE,EAAC,UAAU;IAACd,KAAK,EAAC;;IAtBpEe,OAAA,EAAAC,QAAA,CAsB6E,MAAOC,MAAA,QAAAA,MAAA,OAtBpFM,gBAAA,CAsB6E,SAAO,E;IAtBpFH,CAAA;UAAAO,mBAAA,gB,CAuBmBH,KAAA,CAAAC,eAAe,I,cAA1BvB,mBAAA,CAA4F,MAvBpG2B,UAAA,GAuBoCvB,YAAA,CAA2DO,sBAAA;IAA9CC,EAAE,EAAC,QAAQ;IAACd,KAAK,EAAC;;IAvBnEe,OAAA,EAAAC,QAAA,CAuB4E,MAAKC,MAAA,QAAAA,MAAA,OAvBjFM,gBAAA,CAuB4E,OAAK,E;IAvBjFH,CAAA;UAAAO,mBAAA,gB,CAwBmBH,KAAA,CAAAC,eAAe,I,cAA1BvB,mBAAA,CAA4G,MAxBpH4B,UAAA,GAwBoCxB,YAAA,CAA2EO,sBAAA;IAA9DC,EAAE,EAAC,WAAW;IAACd,KAAK,EAAC;;IAxBtEe,OAAA,EAAAC,QAAA,CAwB+E,MAAkBC,MAAA,QAAAA,MAAA,OAxBjGM,gBAAA,CAwB+E,oBAAkB,E;IAxBjGH,CAAA;UAAAO,mBAAA,gBAyBkBH,KAAA,CAAAC,eAAe,I,cAAzBvB,mBAAA,CAAqG,MAArG6B,WAAqG,GAAlD3B,mBAAA,CAA6C,cAAvC,oBAAkB,GAAA4B,gBAAA,CAAGR,KAAA,CAAAS,QAAQ,iB,KAzB9FN,mBAAA,gBA0BkBH,KAAA,CAAAC,eAAe,I,cAAzBvB,mBAAA,CAAqF,MA1B7FgC,WAAA,GA0BmC9B,mBAAA,CAAqD;IAA5C+B,OAAK,EAAAlB,MAAA,QAAAA,MAAA,UAAAmB,IAAA,KAAEC,QAAA,CAAAC,MAAA,IAAAD,QAAA,CAAAC,MAAA,IAAAF,IAAA,CAAM;IAAEpC,KAAK,EAAC;KAAS,OAAK,E,KA1B/E2B,mBAAA,gBA2BkBH,KAAA,CAAAC,eAAe,IAAID,KAAA,CAAAe,IAAI,gB,cAAjCrC,mBAAA,CAAyH,MA3BjIsC,WAAA,EAAAvB,MAAA,SAAAA,MAAA,QA2BuDb,mBAAA,CAAqE;IAAlEI,IAAI,EAAC,uBAAuB;IAACR,KAAK,EAAC;KAAe,cAAY,oB,MA3BxH2B,mBAAA,e","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}