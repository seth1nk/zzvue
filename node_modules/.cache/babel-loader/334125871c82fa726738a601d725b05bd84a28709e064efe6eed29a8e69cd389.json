{"ast":null,"code":"import { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString } from \"vue\";\nconst _hoisted_1 = {\n  class: \"app-wrapper\"\n};\nconst _hoisted_2 = {\n  class: \"right-panel\"\n};\nconst _hoisted_3 = {\n  class: \"logo-container\"\n};\nconst _hoisted_4 = {\n  class: \"nav-buttons\"\n};\nconst _hoisted_5 = {\n  class: \"button-list\"\n};\nconst _hoisted_6 = {\n  key: 0\n};\nconst _hoisted_7 = {\n  key: 1\n};\nconst _hoisted_8 = {\n  key: 2\n};\nconst _hoisted_9 = {\n  key: 3\n};\nconst _hoisted_10 = {\n  key: 4,\n  class: \"welcome-message\"\n};\nconst _hoisted_11 = {\n  key: 5\n};\nconst _hoisted_12 = {\n  key: 6\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_router_link = _resolveComponent(\"router-link\");\n  const _component_router_view = _resolveComponent(\"router-view\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[10] || (_cache[10] = _createElementVNode(\"link\", {\n    href: \"https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;700&display=swap\",\n    rel: \"stylesheet\"\n  }, null, -1 /* HOISTED */)), _createElementVNode(\"aside\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_createVNode(_component_router_link, {\n    to: \"/\"\n  }, {\n    default: _withCtx(() => _cache[1] || (_cache[1] = [_createElementVNode(\"img\", {\n      src: \"/images/logo.png\",\n      alt: \"MonitorMaster Logo\",\n      class: \"logo\"\n    }, null, -1 /* HOISTED */)])),\n    _: 1 /* STABLE */\n  })]), _createElementVNode(\"nav\", _hoisted_4, [_createElementVNode(\"ul\", _hoisted_5, [_createElementVNode(\"li\", null, [_createVNode(_component_router_link, {\n    to: \"/\",\n    class: \"button\"\n  }, {\n    default: _withCtx(() => _cache[2] || (_cache[2] = [_createTextVNode(\"Главная\")])),\n    _: 1 /* STABLE */\n  })]), _createElementVNode(\"li\", null, [_createVNode(_component_router_link, {\n    to: \"/about\",\n    class: \"button\"\n  }, {\n    default: _withCtx(() => _cache[3] || (_cache[3] = [_createTextVNode(\"О нас\")])),\n    _: 1 /* STABLE */\n  })]), _createElementVNode(\"li\", null, [_createVNode(_component_router_link, {\n    to: \"/contact\",\n    class: \"button\"\n  }, {\n    default: _withCtx(() => _cache[4] || (_cache[4] = [_createTextVNode(\"Контакты\")])),\n    _: 1 /* STABLE */\n  })]), $data.isAuthenticated ? (_openBlock(), _createElementBlock(\"li\", _hoisted_6, [_createVNode(_component_router_link, {\n    to: \"/repairs\",\n    class: \"button\"\n  }, {\n    default: _withCtx(() => _cache[5] || (_cache[5] = [_createTextVNode(\"Ремонты\")])),\n    _: 1 /* STABLE */\n  })])) : _createCommentVNode(\"v-if\", true), $data.isAuthenticated ? (_openBlock(), _createElementBlock(\"li\", _hoisted_7, [_createVNode(_component_router_link, {\n    to: \"/clients\",\n    class: \"button\"\n  }, {\n    default: _withCtx(() => _cache[6] || (_cache[6] = [_createTextVNode(\"Клиенты\")])),\n    _: 1 /* STABLE */\n  })])) : _createCommentVNode(\"v-if\", true), !$data.isAuthenticated ? (_openBlock(), _createElementBlock(\"li\", _hoisted_8, [_createVNode(_component_router_link, {\n    to: \"/login\",\n    class: \"button\"\n  }, {\n    default: _withCtx(() => _cache[7] || (_cache[7] = [_createTextVNode(\"Войти\")])),\n    _: 1 /* STABLE */\n  })])) : _createCommentVNode(\"v-if\", true), !$data.isAuthenticated ? (_openBlock(), _createElementBlock(\"li\", _hoisted_9, [_createVNode(_component_router_link, {\n    to: \"/register\",\n    class: \"button\"\n  }, {\n    default: _withCtx(() => _cache[8] || (_cache[8] = [_createTextVNode(\"Зарегистрироваться\")])),\n    _: 1 /* STABLE */\n  })])) : _createCommentVNode(\"v-if\", true), $data.isAuthenticated ? (_openBlock(), _createElementBlock(\"li\", _hoisted_10, [_createElementVNode(\"span\", null, \"Добро пожаловать, \" + _toDisplayString($data.username), 1 /* TEXT */)])) : _createCommentVNode(\"v-if\", true), $data.isAuthenticated ? (_openBlock(), _createElementBlock(\"li\", _hoisted_11, [_createElementVNode(\"button\", {\n    onClick: _cache[0] || (_cache[0] = (...args) => $options.logout && $options.logout(...args)),\n    class: \"button\"\n  }, \"Выйти\")])) : _createCommentVNode(\"v-if\", true), $data.isAuthenticated && $data.role === 'admin' ? (_openBlock(), _createElementBlock(\"li\", _hoisted_12, _cache[9] || (_cache[9] = [_createElementVNode(\"a\", {\n    href: \"http://localhost:3000\",\n    class: \"admin-button\"\n  }, \"Админ-панель\", -1 /* HOISTED */)]))) : _createCommentVNode(\"v-if\", true)])])]), _createElementVNode(\"main\", null, [_createVNode(_component_router_view)])]);\n}","map":{"version":3,"names":["class","key","_createElementBlock","_hoisted_1","_createElementVNode","href","rel","_hoisted_2","_hoisted_3","_createVNode","_component_router_link","to","default","_withCtx","_cache","src","alt","_","_hoisted_4","_hoisted_5","_createTextVNode","$data","isAuthenticated","_hoisted_6","_createCommentVNode","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_toDisplayString","username","_hoisted_11","onClick","args","$options","logout","role","_hoisted_12","_component_router_view"],"sources":["/home/vas/zuev/repairs/vue/src/App.vue"],"sourcesContent":["<template>\n  <div class=\"app-wrapper\">\n    <link href=\"https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;700&display=swap\" rel=\"stylesheet\">\n    <aside class=\"right-panel\">\n      <div class=\"logo-container\">\n        <router-link to=\"/\">\n          <img src=\"/images/logo.png\" alt=\"MonitorMaster Logo\" class=\"logo\" />\n        </router-link>\n      </div>\n      <nav class=\"nav-buttons\">\n        <ul class=\"button-list\">\n          <li><router-link to=\"/\" class=\"button\">Главная</router-link></li>\n          <li><router-link to=\"/about\" class=\"button\">О нас</router-link></li>\n          <li><router-link to=\"/contact\" class=\"button\">Контакты</router-link></li>\n          <li v-if=\"isAuthenticated\"><router-link to=\"/repairs\" class=\"button\">Ремонты</router-link></li>\n          <li v-if=\"isAuthenticated\"><router-link to=\"/clients\" class=\"button\">Клиенты</router-link></li>\n          <li v-if=\"!isAuthenticated\"><router-link to=\"/login\" class=\"button\">Войти</router-link></li>\n          <li v-if=\"!isAuthenticated\"><router-link to=\"/register\" class=\"button\">Зарегистрироваться</router-link></li>\n          <li v-if=\"isAuthenticated\" class=\"welcome-message\"><span>Добро пожаловать, {{ username }}</span></li>\n          <li v-if=\"isAuthenticated\"><button @click=\"logout\" class=\"button\">Выйти</button></li>\n          <li v-if=\"isAuthenticated && role === 'admin'\"><a href=\"http://localhost:3000\" class=\"admin-button\">Админ-панель</a></li>\n        </ul>\n      </nav>\n    </aside>\n    <main>\n      <router-view></router-view>\n    </main>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      isAuthenticated: false,\n      username: '',\n      role: ''\n    };\n  },\n  created() {\n    this.checkAuth();\n  },\n  methods: {\n    async checkAuth() {\n      try {\n        const response = await fetch('http://localhost:3000/auth/check', {\n          method: 'GET',\n          credentials: 'include',\n        });\n        const data = await response.json();\n\n        if (response.ok) {\n          this.isAuthenticated = true;\n          this.username = data.username || 'Пользователь';\n          this.role = data.role || '';\n        } else {\n          console.error('Токен недействителен:', data.message);\n          this.isAuthenticated = false;\n          this.username = '';\n          this.role = '';\n        }\n      } catch (err) {\n        console.error('Ошибка проверки авторизации:', err);\n        this.isAuthenticated = false;\n        this.username = '';\n        this.role = '';\n      }\n    },\n    async logout() {\n      try {\n        const response = await fetch('http://localhost:3000/auth/logout', {\n          method: 'GET',\n          credentials: 'include',\n        });\n\n        if (response.ok) {\n          this.isAuthenticated = false;\n          this.username = '';\n          this.role = '';\n          this.$router.push('/');\n        } else {\n          console.error('Сервер вернул ошибку при выходе');\n        }\n      } catch (err) {\n        console.error('Ошибка выхода:', err);\n        this.isAuthenticated = false;\n        this.username = '';\n        this.role = '';\n        this.$router.push('/');\n      }\n    }\n  }\n};\n</script>\n\n<style scoped>\n.app-wrapper {\n  display: flex;\n  min-height: 100vh;\n}\n\n.right-panel {\n  position: fixed;\n  top: 50%;\n  right: 0;\n  transform: translateY(-50%);\n  background: linear-gradient(135deg, #3b82f6, #8b5cf6);\n  padding: 20px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 15px;\n  border-radius: 10px;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);\n  width: 220px;\n}\n\n.logo-container {\n  display: flex;\n  justify-content: center;\n}\n\n.logo {\n  max-width: 100px;\n  height: auto;\n  border-radius: 8px;\n  transition: transform 0.3s ease;\n}\n\n.logo:hover {\n  transform: scale(1.05);\n}\n\n.button-list {\n  list-style-type: none;\n  padding: 0;\n  margin: 0;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 10px;\n}\n\n.button {\n  display: block;\n  width: 180px;\n  padding: 10px 15px;\n  background: linear-gradient(45deg, #2563eb, #7c3aed);\n  color: #ffffff;\n  text-decoration: none;\n  border-radius: 8px;\n  font-weight: bold;\n  text-align: center;\n  transition: transform 0.3s ease, box-shadow 0.3s ease;\n  box-shadow: 0 3px 8px rgba(0, 0, 0, 0.2);\n}\n\n.button:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);\n}\n\n.admin-button {\n  display: block;\n  width: 180px;\n  padding: 10px 15px;\n  background: linear-gradient(45deg, #2563eb, #7c3aed);\n  color: #ffffff;\n  text-decoration: none;\n  border-radius: 8px;\n  font-weight: bold;\n  text-align: center;\n  transition: transform 0.3s ease, box-shadow 0.3s ease;\n  box-shadow: 0 3px 8px rgba(0, 0, 0, 0.2);\n}\n\n.admin-button:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);\n}\n\n.welcome-message span {\n  display: block;\n  width: 180px;\n  padding: 10px 15px;\n  font-size: 16px;\n  color: #ffffff;\n  font-weight: bold;\n  text-align: center;\n  background: rgba(59, 130, 246, 0.5);\n  border-radius: 8px;\n}\n\nmain {\n  flex: 1;\n  margin-right: 240px;\n  padding: 20px;\n}\n\n@media (max-width: 768px) {\n  .right-panel {\n    width: 160px;\n    padding: 15px;\n  }\n\n  .logo {\n    max-width: 80px;\n  }\n\n  .button, .admin-button, .welcome-message span {\n    width: 140px;\n    padding: 8px 10px;\n    font-size: 0.9rem;\n  }\n\n  main {\n    margin-right: 180px;\n  }\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}